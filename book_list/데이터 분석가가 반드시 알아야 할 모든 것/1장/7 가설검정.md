# 7 가설검정

## 7.1 귀무가설과 대립가설
&nbsp;검정을 하려면 검정을 하기 위한 주제가 필요하다. 검정하고자 하는 주제가 곧 가설(Hypothesis)이다. 가설은 둘 혹은 그 이상의 변수들 간의 관계에 대한 잠정적 결론이다.

**예시**

&nbsp;컴퓨터 게임 시간'이라는 독립변수가 있고, '성적'이라는 종속 변수가 있다면, 
> '컴퓨터 게임 시간이 길어질수록 성적은 낮아질 것이다.'

라고 가정할 수 있다. 이러한 잠정적인 결론이 가설인 것이다.

&nbsp;데이터 분석적 측면으로 좀 더 구체적으로 이야기하자면, 데이터 분석은 목적성에 따라 네 가지로 분류할 수 있다.

- **기술적 분석(Descriptive Analytics)** : 과거나 현재에 어떤 일이 일어났는지를 파악하기 위한 분석. 데이터의 분포, 추세 등을 분석하여 상황을 모니터링한다. 

- **진단적 분석(Diagnostic Analytics)** : 과거나 현재에 발생한 사건의 원인을 밝히기 위한 분석. 데이터 간의 관계를 분석하여 인과관계를 찾는다.

- **예측 분석(Predictive Analytics)** : 기계학습 모델 등을 사용하여, 미래에 어떤 일이 어느정도의 확률로 일어날지를 예측한다. 현재는 알 수 없는 결과의 가능성을 파악한다.

- **처방적 분석(Prescriptive Analytics)** : 예측되는 미래의 결과를 위해 어떻게 하면 좋을지 청방하기 위한 분석. 제한된 자원을 효과적으로 활용하여 최적의 성과를 낼 수 있도록 방향을 도출한다.

기본적인 데이터 확인 수준의 기술적 분석부터, 방향성까지 제시하는 처방적 분석이 있다. 기술적 분석을 제외하고는 모두 가설 설정이 필요하다.

- **$ H_0$ , 귀무가설(Null hypothesis)**: 증명하고자 하는 가설과 반대되는 가설로써, 효과와 차이가 없는 가설을 의미

- **$ H_1$ , 대립가설(Alternative hypothesis)**: 귀무가설이 기각됐을 때 대안적으로 채택되는 가설(귀무가설과 반대되는 가설)

통계 기반의 가설검정은, 자신이 옳다고 주장하는 내용과 정반대의 가설인 귀무가설을 세우고 가설검정을 하여 귀무가설이 잘못된 것임을 밝힌다.

## 7.2 가설검정의 절차
>예시
1. 가설 설정
    - 귀무가설 : 혈압 개선 약품을 먹었을 때, 혈압의 변화가 없을 것이다.
    - 대립가설 : 혈압 개선 약품을 먹었을 때, 혈압이 변화할 것이다.
2. 유의수준 설정
    - 보편적 기준인 p-value < 0.05로 설정
3. 실험 수행
    - 실험군 집단의 투약 전과 후의 혈압 평균 t-test
    - 대조군 집단의 투약 전과 후의 혈압 평균 t-test
4. 검정 통계량 산출
    - 실험군의 p값 : 0.001
    - 대조군의 p값 : 0.21
5. 대립가설 기각/채택 판단
    - 위약을 투약했던 대조군은 실험 전과 후의 혈압 차이가 없었으나, 실험군은 유의수준 내에서 차이가 있으며 혈압이 감소했으므로 귀무가설을 기각하고, 대립 가설 채택


## 7.3 가설검정의 유의수준과 p값
&nbsp; 가설검정은 모집단에 대한 가설이 통계적으로 옳은가를 판별하기 위한 방법이다. 자세히 정의하자면, 모집단에서 표본을 추출하여 얻은 표본 통계량으로 모집단의 모수가 귀무가설과 맞지 않고 연구가설에 합당한지 판단하기 위한 평가 방법이다. 귀무가설에 대한 p-value가 유의수준 안에 들어오는지에 따라 가설의 기각과 채택을 판별한다.

&nbsp;가설검정에 의한 p값이 유의수준보다 적은 값으로 나오면 귀무가설을 기각하고, 그 이상으로 나오면 귀무가설을 채택한다.

&nbsp;유의수준과 반대되는 기준이 신뢰수준(Confidence level)이다.  유의수준이 0.05이면 신뢰수준은 0.95가 된다. 유의수준과 신뢰수준을 합하면 1이다.

&nbsp;가설검정에서 추가적으로 고려해야 할 사항이 있다. 가설검정은 귀무가설의 기각역을 어느 쪽으로 설정하는가에 따라 왼쪽꼬리 검정, 오른쪽 꼬리 검정, 그리고 양측 검정으로 구분된다.

## 7.4 1종 오류와 2종 오류

- **1종 오류** : 귀무가설이 참임에도 불구하고 귀무가설을 기각하는 오류

    (실제로 효과가 없는데 효과가 있다고 판단)

- **2종 오류**: 귀무가설이 거짓임에도 불구하고 귀무가설을 채택하는 오류.

    (실제로 효과가 있는데 효과가 없다고 판단)

&nbsp;1종 오류가 발생할 확률은 $\alpha$로 나타낸다. 이 값은 유의 수준과 동일한 지표다.
 따라서 $\alpha$가 0.05이면 귀무가설을 잘못 기각할 확률이 5%라는 것을 뜻한다. 
 1종 오류를 줄이기 위해서는 유의수준의 기준 값을 더 낮추면 된다. 
 단순한 귀무가설에서는 alpha가 1종 오류가 일어날 확률을 뜻하지만, 복합적인 귀무가설의 경우에는 1종오류가 발생할 확률의 최대치를 의미한다.

 &nbsp;2종 오류가 발생할 확률은 $\beta$로 나타내며 가설검정의 검정력(power)이 커질수록 줄어들게 된다. 검정력은 귀무가설이 거짓일 때 귀무가설을 기각할 확률을 의미하며, 유의수준, 즉 기각역이 주어지면 표본이 늘어나지 않는 이상 자동으로 결정된다. 따라서 유의수준을 정한다는 것은 검정력을 정한다는 것과 같은 의미다.

 &nbsp; $\alpha$ 와 $\beta$는 트레이드오프 관계다. 일반적으로는 1종오류를 2종오류보다 더 중요하게 생각한다. 다만 암 진단과 같은 경우에는 1종 오류보다 2종 오류를 더 중요하게 생각하고 환자를 진단한다.