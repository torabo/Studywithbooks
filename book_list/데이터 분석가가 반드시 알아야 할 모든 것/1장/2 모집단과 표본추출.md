# 2 모집단과 표본추출

## 2.1 모집단과 표본, 전수조사와 표본조사

&nbsp; 통계분석을 하려면 분석하고자 하는 대상의 데이터가 있어야 한다. 이러한 분석 대상 전체의 집합을 **모집단(population)** 이라 한다. 그리고 모집단의 부분집합, 즉 모집단의 일부를 추출한 것을 **표본(sample)** 이라고 한다. 모집단의 자료 전체를 조사 및 분석하여 정보를 추출하는 것을 **전수조사** 라 하며, 모집단에서 추출한 표본을 통해 모집단의 정보(평균, 표준편차 등)을 추정하고 검정하는 것을 **표본조사** 라고 한다.

&nbsp; 표본 추출 방법 하나까지도 데이터과학의 성과에 큰 영향을 미친다. 그렇기 때문에 기초 통계에 해당되는 모수와 표본의 개념과 추출 원리를 확실하게 이해할 필요가 있다.

## 2.2 표본조사를 하는 이유와 데이터과학 적용 방법
&nbsp; 최종 분석에는 전체 데이터를 사용하더라도, 분석 모델이 완성될 때까지는 표본 데이터를 활용하는 것이 경제적, 시간적으로 유리하다. 통계적으로 변수 하나당 최소 30개의 관측치가 필요하다.

&nbsp; 데이터 가공 및 변환이 수도 없이 일어나는 예측 및 분류 모델링 단계에서는 적절한 표본을 추출해서 진행하고 전체 프로세스가 완성됐을 때 전체의 데이터를 사용하여 최종적인 모델 성능을 확인하고 예측 및 분류를 하는 것이 좋다.

&nbsp; 모집단에 대한 정확한 파악이 불가능하거나 자동차 충격 테스트와 같은 파괴적인 조사를 해야 할 경우에도 표본조사를 해야 한다.

>표본조사를 통해 모집단의 크기를 유추하는 방법

e.g ) 만약 서울시 관악구에 살고 있는 길고양이가 총 몇마리인지를 알아내려면 어떻게 해야 할까?

이럴때 사용하는 표본조사 방법이 **표지 재포획법(marking-and-recapture method)** 이다.

방법 : 우선 관악구의 길고양이 중 일부분, 예를 들어 100마리를 포획한다. 그리고 포획했던 100마리를 알아볼 수 있는 표식을 남기고 다시 풀어준다. 그리고 며칠 정도 시간이 지나고, 다시 무작위로 길고양이 100마리를 포획한다. 이렇게 표식이 있는 길고양이의 비율을 통해 관악구의 길고양이 모집단 수를 추정할 수 있다.
$$\frac{100}{N} \approx \frac{n}{100}$$
전체 모집단 N 중에서 처음에 포획해서 표식을 남겼던 100마리 , 오른쪽은 두 번째로 포획했던 100마리 길고양이 중에서 표식이 남아있는 n 마리의 길고양이.

즉 만약 두 번째 포획했을 때 표식이 남아있는 고양이가 10마리라면 관악구의 길고양이는 1000마리라고 추정할 수 있다.

## 2.3 표본추출에서 나타나는 편향의 종류
모집단과 표본의 자연 발생적인 변동을 표본 오차(sampling error)라 한다. 이를 제외한 변동을 비표본 오차(non-sampling error)라고 한다. 피표본 오차의 한 원인이 바로 편향(bias)이다. 편향은 표본에서 나타나는 모집단과의 체계적인 차이다.

- 표본추출편향 : 표본 추출 과정에서 체계적인 경향이 개입되어 모집단에서 편향된 포본만 추출되는 경우

- 가구편향 : 모집단의 부분 집단 단위에서 하나의 관측치씩 추출하는 경우 크고 적은 집단이 작고 많은 집단보다 적게 추출되는 경우.
- 무응답편향 : 설문에 응답하지 않는 사람들과 응답하는 사람들에 체계적인 차이가 있는 경우.
- 응답편향 : 설문 형식의 문제, 응답자의 심리적 이슈에 의해 표본이 영향을 받는 경우(브래들리효과).

**브래들리 효과** : 피조사자가 자신의 생각이나 신념을 밝히기 어려워하여 거짓된 응답을 하는 현상.

표본 편향은 확률화 등의 방법을 통해 최소화하거나 없앨 수 있다.
확률화란 모집단으로 부터 편향이 발생하지 않는 표본을 추출하는 방법을 의미한다. 이렇게 추출한 표본을 확률표본이라 한다. 모집단에서 표본이 추출될 확률이 동등한지 여부에 따라 확률추출과 비확률추출로 구분한다.

## 2.4 인지적 편향의 종류
분석가의 성향이나 상황에 따라 비논리적인 추론을 내리는 패턴인 인지적 편향(Cognitive bias).

인지심리학자인 트버스키(AmosTversky)와 행동경제학자 대니얼 카너먼(Daniel Kahneman)이 사람들은 언제나 합리적으로 생각하고 행동하는 것이 아니며, 휴리스틱(heuristic)을 통해 왜곡된 지각으로 결정을 하는 경우가 많다고 주장.

1. 확증 편향(confirmation bias)

    자신이 본래 믿고 있는 대로 정보를 선택적으로 받아들이고 임의로 판단하는 편향이다.

2. 기준점 편향(anchoring bias)

    분석가가 가장 처음에 접하는 정보에 지나치게 매몰되는 편향이다.

3. 선택 지원 편향 (choice-supportive bias)

    본인이 의사결정을 내리는 순간 그 선택의 긍정적인 부분에 대해 더 많이 생각하고 그 결정에 반대되는 증거를 무시하게 되는 편향


4. 분모 편향(denominator bias)
    
    분수 전체가 아닌 분자에만 집중하여 현황을 왜곡하여 판단하게 되는 편향이다.

5. 생존자 편향(survivorship bias)
    
    소수의 성공한 사례를 일반화된 것으로 인식함으로써 나타나는 편향이다.

## 2.5 머신러닝 모델 측면의 편향과 분산

편향은 예측값들이 정답과 일정하게 차이가 나는 정도를 의미하며, 분산은 주어진 데이터 포인트에 대한 모델 예측의 가변성을 뜻한다.
편향과 분산은 트레이드오프 관계다.

## 2.6 표본 편향을 최소화하기 위한 표본 추출 방법
표본추출을 두가지 관점에서 바라볼 필요가 있다.
- 첫째는 데이터 수집 단계의 표본 추출이다.

- 둘째는 기업에서 이미 가지고 있는 몇 천만 건의 고객 정보데이터, 인터넷 기업의 웹 로그 데이터 등과 같은 이른바 빅데이터에서 분석 모델링을 위한 적절한 크기의 표본데이터를 추출하는 것이다.

데이터 수집 단계의 표본추출은 일반적으로 다음과 같은 단계로 구성.
1. 모집단 확정
2. 표본 프레임 결정
3. 표본 추출방법 결정
4. 표본크기 결정
5. 표본추출

> 표본추출방법결정

데이터에 이상이 없는 모집단과 표본프레임이 확정이 되면 확률 표본추출과 비확률 표본 추출 방법 그리고 복원추출과 비복원 추출 중 적절한 방법 선택.

>>확률 표본추출방법방법

1. **단순 임의 추출방법** : 다른 방법에 비해 쉽고 빠르기 때문에 가장 일반적으로 사용.
2. **계층적 표본추출방법** : 모든 구성단위에 일련번호를 부여한 뒤 일정한 간격으로 표본을 선택하는 방법 - 일정한 주기성이 있는 경우에는 표본의 대표성이 결여될 수 있다.
3. **층화 표본추출방법** : 모집단이 특정한 기준으로 분류가 가능할 때 쓰일 수 있는 방법. - 표본을 단순 임의 추출방법으로 선정했을 때 표본이 편중될 수 있는 위험을 보완.

4. **군집 표본추출방법** : 층화 표본추출방법처럼 모집단을 특정한 기준으로 분류한 뒤, 그중 하나의 소집단을 선택하여 분석하는 방법. - 특정 기준으로 분류된 하나의 소집단만을 표본으로 두기 때문에 전체 모집단의 모수를 반영하지 못할 수도 있다는 단점이 있다.

5. 복원추출법

6. 비복원 추출법
